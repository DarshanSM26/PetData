<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pet Health Summary</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
<h2>Pet Health Summary</h2>
<div id="healthSummary"></div>

<script>
    const API_BASE = "http://localhost:8080";
    const urlParams = new URLSearchParams(window.location.search);
    const petId = urlParams.get("petId");

    fetch(`${API_BASE}/demo/pet-health/${petId}`)
      .then(res => res.json())
      .then(data => renderHealth(data))
      .catch(err => console.error("Error fetching health history:", err));

    function renderHealth(history) {
      const div = document.getElementById("healthSummary");
      div.innerHTML = "";

      if (!history || history.length === 0) {
        div.innerHTML = "<p>No health data found.</p>";
        return;
      }

      history.forEach(h => {
        const card = document.createElement("div");
        card.className = "card p-3 mb-2";
        card.innerHTML = `
          <p><strong>Date:</strong> ${h.appointmentDate}</p>
          <p><strong>Vet:</strong> ${h.vetName}</p>
          <p><strong>Weight:</strong> ${h.weight} kg</p>
          <p><strong>Temperature:</strong> ${h.temperature} Â°C</p>
          <p><strong>Notes:</strong> ${h.notes}</p>
        `;
        div.appendChild(card);
      });
    }
</script>
</body>
</html>
